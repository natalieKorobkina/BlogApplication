@model List<IndexBlogViewModel>

@{
    ViewBag.Title = "Index";
}

@section scripts {
    <script src="~/Scripts/indexpost.js" type="text/javascript"></script>
}

<!-- Main Content -->
<ul class="list-unstyled list-inline list-btn">
    <li>
        <a class="btn btn-dark" href="@Url.Action("Create", "Blog")">
            Add new post <i class="fas fa-plus"></i>
        </a>
    </li>
</ul>

<!--Show all posts-->
@if (!Model.Any())
{

    <div style="margin-top:15px;">
        <p><strong>We do not have posts yet</strong></p>
    </div>
}
else
{
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-md-10 mx-auto">
                @foreach (var record in Model)
                {
                <div class="post-preview">
                    <a href="@Url.Action("PostDetails", "Blog", new { id = record.Id })">
                        <h2 class="post-title">
                            @record.Title
                        </h2>
                    </a>
                    @if (record.DateCreated != record.DateUpdated)
                    {
                        <p class="post-meta">
                            Updated by @record.UserName
                            on @record.DateUpdated.ToString("dd/MM/yyyy HH:mm")
                        </p>
                    }
                    else
                    {
                        <p class="post-meta">
                            Posted by @record.UserName
                            on @record.DateCreated.ToString("dd/MM/yyyy HH:mm")
                        </p>
                    }
                    @if (User.IsInRole("Admin"))
                    {
                        <div class="btn-group" role="group">
                            <form action="@Url.Action("Update", "Blog", new { id = record.Id })">
                                <a href="#" class="btn btn-light action">Update</a>
                            </form>
                            <form method="post" action="@Url.Action("Delete", "Blog", new { id = record.Id })">
                                <a href="#" class="btn btn-light action">Delete</a>
                            </form>
                        </div>
                    }
                </div>
                    <hr>
                }
            </div>
        </div>
    </div>
}

